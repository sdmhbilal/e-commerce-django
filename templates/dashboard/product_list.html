{% extends "dashboard/base.html" %}
{% block title %}Products{% endblock %}
{% block content %}
  <div class="page-header flex-wrap">
    <h1>Products</h1>
    <a href="{% url 'dashboard:product_create' %}" class="btn btn-dash-primary">Add product</a>
  </div>
  <div class="dashboard-card">
    <div class="table-responsive">
      <table class="dashboard-table table">
        <thead>
          <tr>
            <th>Image</th>
            <th>ID</th>
            <th>Name</th>
            <th>Price</th>
            <th>Stock</th>
            <th>Active</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          {% for product in products %}
            <tr>
              <td>
                {% with cover=product.get_cover_image %}
                  {% if cover %}
                    <img src="{{ cover.url }}" alt="{{ product.name }}" class="dash-product-thumb-list">
                  {% else %}
                    <span class="text-muted small">â€”</span>
                  {% endif %}
                {% endwith %}
              </td>
              <td>{{ product.id }}</td>
              <td><strong>{{ product.name }}</strong></td>
              <td>$ {{ product.price }}</td>
              <td>{{ product.stock_quantity }}</td>
              <td>{% if product.is_active %}<span class="text-success">Yes</span>{% else %}<span class="text-muted">No</span>{% endif %}</td>
              <td>
                <div class="btn-group-actions">
                  <a href="{% url 'dashboard:product_edit' product.id %}" class="btn btn-dash-outline btn-sm me-1">Edit</a>
                  <a href="{% url 'dashboard:product_delete' product.id %}" class="btn btn-dash-danger btn-sm">Delete</a>
                </div>
              </td>
            </tr>
          {% empty %}
            <tr><td colspan="7" class="text-muted text-center py-4">No products yet.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
{% endblock %}
